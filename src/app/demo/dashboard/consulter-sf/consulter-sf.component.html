<div class="row">
    <div class="col-sm-12 m-b-15">
        <div id="main-search" class="main-search open">
            <div class="input-group">
                <input type="text" id="m-search" class="form-control" placeholder="Search . . ." (keyup)="verifyingSearch($event)">
                <span class="input-group-append search-btn btn btn-primary feather icon-search input-group-text" (click)="Search()">
                </span>
            </div>
        </div>
    </div>
    <!--
    <div class="col-sm-12 m-b-15">
        Chercher le ShipmentFile avec status :

        <div class="custom-control custom-radio custom-control-inline" style="margin-left: 2%;">
            <input type="radio" id="customRadioInline1" name="customRadioInline1" value="Import-Aborded" #val class="custom-control-input" (click)="cherchStatus(val)">
            <label class="custom-control-label" for="customRadioInline1">Import-Aborded</label>
        </div>
        <div class="custom-control custom-radio custom-control-inline">
            <input type="radio" id="customRadioInline2" name="customRadioInline1" value="Kms_Processing" #val1 class="custom-control-input" (click)="cherchStatus(val1)">
            <label class="custom-control-label" for="customRadioInline2">Kms Processing</label>
        </div>
        <div class="custom-control custom-radio custom-control-inline">
            <input type="radio" id="customRadioInline3" name="customRadioInline1" value="Odm_Processing" #val2 class="custom-control-input" (click)="cherchStatus(val2)">
            <label class="custom-control-label" for="customRadioInline3">ODM Processing</label>
        </div>
        <div class="custom-control custom-radio custom-control-inline">
            <input type="radio" id="customRadioInline4" name="customRadioInline1" value="tous" #val4 class="custom-control-input" (click)="cherchStatus(val4)">
            <label class="custom-control-label" for="customRadioInline4">Tous</label>
        </div>

    </div>
-->

    <div class="col-md-12" *ngIf="!ShowDetails">
        <app-card cardTitle="Listes ShipmentFiles" blockClass="table-border-style">
            <perfect-scrollbar style="min-height: 10px;max-height: 500px;">
                <div class="table table-hover">

                    <table class="table">
                        <thead>
                            <tr>
                                <th>Numéro</th>
                                <th>Nom</th>
                                <th>Type </th>
                                <th>Status</th>
                                <th>Nbr Compteur</th>
                                <th>Détails</th>
                            </tr>
                        </thead>

                        <tbody *ngFor="let sf of shipmentFile;let SFIndex=index;">
                            <tr style="cursor: pointer;">
                                <td>{{sf.id}}</td>
                                <td>{{sf.name}}</td>


                                <td>{{sf.type_compteur}}</td>


                                <td>


                                    <div [ngClass]="{'ValidStat' : sf.status=='Provisioned','Encour' : sf.status=='Odm_Processing' || sf.status=='Kms_Processing','InvalidStat' :sf.status=='Rejected' || sf.status=='Import-Aborded'  }">{{sf.status}}
                                        <i class="feather" [ngClass]="{'icon-x-circle':sf.status=='Rejected' || sf.status=='Import-Aborded' ,'icon-loader':sf.status=='Odm_Processing'}"></i> </div>

                                </td>
                                <td>{{sf.nbr_meters}}</td>

                                <td>
                                    <div class="voirDetails" (click)="ShipmentFileClicked(SFIndex)">
                                        <span>VoirDétails</span> <i class="feather icon-eye"></i>
                                    </div>

                                </td>

                            </tr>


                        </tbody>


                    </table>


                </div>
            </perfect-scrollbar>
            <ngb-pagination style="margin-top: 1%;" class="d-flex justify-content-center" [collectionSize]="120" [(page)]="page" [maxSize]="8" [rotate]="true" [ellipses]="false" [boundaryLinks]="true" (pageChange)="pageChange()"></ngb-pagination>

        </app-card>
    </div>
    <div class="col-md-12" *ngIf="ShowDetails">
        <app-card cardTitle="{{clickedSf.name}}" blockClass="table-border-style">
            <p class="col-md-12 text-right" id="ListSF" (click)="ReturnToList()">listes des Sfipenetfile <i class="feather icon-corner-down-left"></i></p>

            <ngb-tabset>
                <ngb-tab title="Info">
                    <ng-template ngbTabContent>
                        <perfect-scrollbar style="min-height: 10px;max-height: 245px;">
                            <div class="table-responsive">
                                <div class="table">
                                    <tbody>
                                        <tr>
                                            <th>Name</th>
                                            <th></th>
                                            <th>{{clickedSf.name}}</th>
                                        </tr>
                                        <tr>
                                            <th>Type</th>
                                            <th></th>
                                            <th>{{clickedSf.type_compteur}}</th>

                                        </tr>
                                        <tr>
                                            <tr>
                                                <th>status</th>
                                                <th></th>
                                                <th>{{clickedSf.status}}</th>

                                            </tr>
                                            <tr>
                                                <tr>
                                                    <th>Date De changement</th>
                                                    <th></th>
                                                    <th>{{DateChangement_Status | date:'medium'}}</th>

                                                </tr>
                                    </tbody>
                                    <div style="text-align: center; margin-top: -2%;" *ngIf="ISImportAbord">
                                        <button type="button" class="btn btn-success" *ngIf="ISImportAbord_KMS" (click)="ResumerSF(clickedSf.name)">Resume</button>
                                        <button type="button" class="btn btn-danger" (click)="RejecterSF(clickedSf.name)">Reject</button>
                                        <p style="margin-top: 2%;">Vous Avez encore {{msg_nbr_Resume}} tentative de resume </p>
                                    </div>
                                </div>
                            </div>
                        </perfect-scrollbar>
                    </ng-template>
                </ngb-tab>
                <ngb-tab title="User">
                    <ng-template ngbTabContent>
                        <perfect-scrollbar style="min-height: 10px;max-height: 245px;">
                            <div class="table-responsive" *ngIf="DragDrop">
                                <table class="table">

                                    <tbody>


                                        <tr>
                                            <th>Prénom</th>
                                            <th>{{clickedSf.user.lastName}}</th>
                                            <th>
                                            </th>
                                        </tr>
                                        <tr>
                                            <th>Nom</th>
                                            <th>{{clickedSf.user.name}}</th>
                                            <th style="text-align: right;">
                                            </th>
                                        </tr>
                                        <tr>
                                            <th>Numéro de Téléphone</th>
                                            <th>{{clickedSf.user.phone_number}}</th>

                                        </tr>
                                        <tr>
                                            <th>Cin</th>
                                            <th>{{clickedSf.user.cin}}</th>

                                        </tr>
                                        <tr>
                                            <th>Adresse Email</th>
                                            <th>{{clickedSf.user.email}}</th>

                                        </tr>
                                        <tr>
                                            <th>Adress</th>
                                            <th>{{clickedSf.user.adress}}</th>

                                        </tr>




                                    </tbody>
                                </table>
                                <div class="col-sm-12">
                                    <h5>Roles</h5>

                                    <div class="row">


                                        <ul class="col-md-4" *ngFor="let titleRole of clickedSf.user.roles; let rolTypeIndex=index ">

                                            <li>{{titleRole.name}}</li>
                                        </ul>
                                    </div>

                                </div>
                            </div>

                        </perfect-scrollbar>
                        <div *ngIf="!DragDrop">
                            <p style="margin-top: 2%;">SfipmentFile est ajouter avec Drag && Drop</p>
                        </div>
                    </ng-template>
                </ngb-tab>
                <ngb-tab title="Historique">
                    <ng-template ngbTabContent>
                        <perfect-scrollbar style="min-height: 10px;max-height: 245px;">

                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>

                                            <th>Status</th>
                                            <th>Raison</th>
                                            <th>Date de modefication</th>
                                        </tr>
                                    </thead>

                                    <tbody *ngFor="let hist of historiques">

                                        <tr>

                                            <td>{{hist.nomStatus}}</td>
                                            <td>{{hist.raison}}</td>
                                            <td>{{hist.idHistorique.modefication_sf | date:'medium'}}</td>
                                        </tr>

                                    </tbody>

                                </table>
                            </div>

                        </perfect-scrollbar>
                    </ng-template>
                </ngb-tab>
                <ngb-tab title="Meters" *ngIf="showList_Meters">
                    <ng-template ngbTabContent>
                        <perfect-scrollbar style="min-height: 10px;max-height: 420px;">
                            <div class="table table-hover">

                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Numéro</th>
                                            <th>Communication methode </th>
                                            <th>Type</th>
                                            <th>Status</th>
                                            <th>Connected</th>
                                            <th>Amr_Router</th>
                                            <th *ngIf="Show_Cahnnel">Channel</th>
                                            <th>Map</th>
                                        </tr>
                                    </thead>

                                    <tbody *ngFor="let meter of meters;let MeterIndex=index;">
                                        <tr style="cursor: pointer;">
                                            <td>{{meter.id}}</td>
                                            <td>{{meter.communication_method}}</td>
                                            <td>{{meter.meter_Type}}</td>
                                            <td>{{meter.status}}</td>
                                            <td [ngClass]="{'ValidStat' :meter.is_Connected==true,'InvalidStat':meter.is_Connected==false}">{{meter.is_Connected}}</td>
                                            <td>{{meter.amr_Router}}</td>
                                            <td *ngIf="Show_Cahnnel">{{meter.channel}}</td>
                                            <td>#</td>
                                        </tr>


                                    </tbody>


                                </table>


                            </div>
                        </perfect-scrollbar>
                        <ngb-pagination style="margin-top: 1%;" class="d-flex justify-content-center" [collectionSize]="300000" [(page)]="pageMeter" [maxSize]="8" [rotate]="true" [ellipses]="false" [boundaryLinks]="true" (pageChange)="pageChangeMeter()"></ngb-pagination>

                    </ng-template>
                </ngb-tab>
            </ngb-tabset>
        </app-card>
    </div>
</div>